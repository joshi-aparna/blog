{"componentChunkName":"component---src-templates-blog-post-js","path":"/gatsby-reuse-react-component/","result":{"data":{"site":{"siteMetadata":{"title":"Aparna's Personal Space","author":"Aparna Ravindra"}},"markdownRemark":{"id":"7988f6fd-7f06-58a9-bf84-b9ff926d03b3","excerpt":"I started this blog using the template present in the github repository here. The template came with a  page where the page lists all the blog posts with theâ€¦","html":"<p>I started this blog using the template present in the github repository <a href=\"https://github.com/wangonya/flexible-gatsby\">here</a>. The template came with a <code class=\"language-text\">/tags/&lt;&lt;tagname&gt;&gt;</code> page where the page lists all the blog posts with the tag <code class=\"language-text\">&lt;&lt;tagname&gt;&gt;</code>. The tags page looked like this:\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 970px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 20.16460905349794%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAEABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB3qAH/8QAFBABAAAAAAAAAAAAAAAAAAAAEP/aAAgBAQABBQJ//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFBABAAAAAAAAAAAAAAAAAAAAEP/aAAgBAQAGPwJ//8QAFBABAAAAAAAAAAAAAAAAAAAAEP/aAAgBAQABPyF//9oADAMBAAIAAwAAABCAD//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABoQAAAHAAAAAAAAAAAAAAAAAAAQESExUXH/2gAIAQEAAT8QS30QX//Z'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/blog/static/b5022debdfa1ad16665c0ace8deba34d/fc615/tagpage-before.avif 243w,\n/blog/static/b5022debdfa1ad16665c0ace8deba34d/b3175/tagpage-before.avif 485w,\n/blog/static/b5022debdfa1ad16665c0ace8deba34d/006d3/tagpage-before.avif 970w,\n/blog/static/b5022debdfa1ad16665c0ace8deba34d/b52ec/tagpage-before.avif 1455w,\n/blog/static/b5022debdfa1ad16665c0ace8deba34d/44c94/tagpage-before.avif 1940w,\n/blog/static/b5022debdfa1ad16665c0ace8deba34d/b65f2/tagpage-before.avif 2958w\"\n              sizes=\"(max-width: 970px) 100vw, 970px\"\n              type=\"image/avif\"\n            /><source\n              srcset=\"/blog/static/b5022debdfa1ad16665c0ace8deba34d/0e3e2/tagpage-before.webp 243w,\n/blog/static/b5022debdfa1ad16665c0ace8deba34d/749af/tagpage-before.webp 485w,\n/blog/static/b5022debdfa1ad16665c0ace8deba34d/dbca2/tagpage-before.webp 970w,\n/blog/static/b5022debdfa1ad16665c0ace8deba34d/bda17/tagpage-before.webp 1455w,\n/blog/static/b5022debdfa1ad16665c0ace8deba34d/0dc73/tagpage-before.webp 1940w,\n/blog/static/b5022debdfa1ad16665c0ace8deba34d/4bc6c/tagpage-before.webp 2958w\"\n              sizes=\"(max-width: 970px) 100vw, 970px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/blog/static/b5022debdfa1ad16665c0ace8deba34d/3f316/tagpage-before.jpg 243w,\n/blog/static/b5022debdfa1ad16665c0ace8deba34d/0d3a1/tagpage-before.jpg 485w,\n/blog/static/b5022debdfa1ad16665c0ace8deba34d/ec7ce/tagpage-before.jpg 970w,\n/blog/static/b5022debdfa1ad16665c0ace8deba34d/8010b/tagpage-before.jpg 1455w,\n/blog/static/b5022debdfa1ad16665c0ace8deba34d/f32bc/tagpage-before.jpg 1940w,\n/blog/static/b5022debdfa1ad16665c0ace8deba34d/02d41/tagpage-before.jpg 2958w\"\n            sizes=\"(max-width: 970px) 100vw, 970px\"\n            type=\"image/jpeg\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/blog/static/b5022debdfa1ad16665c0ace8deba34d/ec7ce/tagpage-before.jpg\"\n            alt=\"Tags Page - Before\"\n            title=\"Tags Page - Before\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n    </span></p>\n<p>I decided that the tags page should look similar to the blog's landing page with the posts filtered depending on the selected tag. There are two implications to this.</p>\n<ol>\n<li>\n<p>The tags page should get the same set of fields in the input as the landing page.<br>\nThe default tags page did not need the excerpt of the post, the title image, the \"timeToRead\" value. Therefore the graphql query used by the tags page needed to be updated to include these fields. If you ignore the pagination in the landing page, the queries used in both pages are almost the same. The tags page has a filter for the tag, of course. You can find the queries <a href=\"https://github.com/joshi-aparna/blog/blob/97f727901703e351f0df96513d648786fcf82b77/src/templates/blog-list.js#L60\">here</a> and <a href=\"https://github.com/joshi-aparna/blog/blob/97f727901703e351f0df96513d648786fcf82b77/src/templates/tags.js#L41\">here</a>.</p>\n</li>\n<li>\n<p>The UI of the tags page should be changed to make it appear similar to the landing page\nNow that I had all the data required in the tags page, it was time to change the UI of the tags page. Making it appear like the landing page also meant that there would be code duplication for the common components. This post is all about how I went about extracting the common code and reused it to make the tags page.</p>\n</li>\n</ol>\n<h4>Create a common component</h4>\n<p>The landing page is a list of all posts. Each post is made of the image, the title, an excerpt and the date of the post. Let's call this a blog-item. I created a new component in <code class=\"language-text\">src/templates</code> directory called <code class=\"language-text\">blog-item.js</code>. The class <code class=\"language-text\">BlogItems</code> exported from this file is a component on its own and hence it extends <code class=\"language-text\">React.Component</code>.\nIn Gatsby, the input to a component comes in the form of <code class=\"language-text\">this.props</code>. So, I extracted the posts to be displayed on the variable called <code class=\"language-text\">items</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const posts = this.props.items</code></pre></div>\n<p>Once I have the items (posts) that needed to be displayed, I iterate through them.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">posts.map(({ node }) =&gt; {\n    // return the HTML code here\n})</code></pre></div>\n<p>You can find the code for the blog-items component <a href=\"https://github.com/joshi-aparna/blog/blob/97f727901703e351f0df96513d648786fcf82b77/src/templates/blog-item.js#L8\">here</a></p>\n<h4>Using the created component</h4>\n<p>Now that the common component <code class=\"language-text\">BlogItems</code> is created, it can be used both in the landing page and the tags page of the blog. The component requires <code class=\"language-text\">items</code> as input.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;BlogItems items={posts} /&gt;</code></pre></div>\n<p>Place this tag where you need in the page. In the landing page, this component is placed just before the dive for pagination. In the tags page, the component is placed in the main div just below the tag header. And, that's it. The <a href=\"/blog/tags/tech/\">tags page</a> now appears as:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 970px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/blog/static/073e4206e785a441e044c1cc63ede6ef/06e68/tagpage-after.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 63.37448559670782%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAEDAgX/xAAUAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHrXxRGIH//xAAYEAADAQEAAAAAAAAAAAAAAAABAhADEf/aAAgBAQABBQJNQ5gXl//EABURAQEAAAAAAAAAAAAAAAAAAAEQ/9oACAEDAQE/ASf/xAAXEQADAQAAAAAAAAAAAAAAAAABEBFB/9oACAECAQE/ATMX/8QAFxABAAMAAAAAAAAAAAAAAAAAEBEhMf/aAAgBAQAGPwKLdf/EABoQAAICAwAAAAAAAAAAAAAAAAERECEAMYH/2gAIAQEAAT8hKR2sVg7DzYz/AP/aAAwDAQACAAMAAAAQQ8//xAAXEQEAAwAAAAAAAAAAAAAAAAABEBEh/9oACAEDAQE/EAhrcf/EABURAQEAAAAAAAAAAAAAAAAAABAh/9oACAECAQE/EKD/xAAbEAACAgMBAAAAAAAAAAAAAAAAAREhMUFRgf/aAAgBAQABPxCyjkKoXMicaeCNvGmKlEks/9k='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/blog/static/073e4206e785a441e044c1cc63ede6ef/fc615/tagpage-after.avif 243w,\n/blog/static/073e4206e785a441e044c1cc63ede6ef/b3175/tagpage-after.avif 485w,\n/blog/static/073e4206e785a441e044c1cc63ede6ef/006d3/tagpage-after.avif 970w,\n/blog/static/073e4206e785a441e044c1cc63ede6ef/b52ec/tagpage-after.avif 1455w,\n/blog/static/073e4206e785a441e044c1cc63ede6ef/44c94/tagpage-after.avif 1940w,\n/blog/static/073e4206e785a441e044c1cc63ede6ef/6c6b6/tagpage-after.avif 2310w\"\n              sizes=\"(max-width: 970px) 100vw, 970px\"\n              type=\"image/avif\"\n            /><source\n              srcset=\"/blog/static/073e4206e785a441e044c1cc63ede6ef/0e3e2/tagpage-after.webp 243w,\n/blog/static/073e4206e785a441e044c1cc63ede6ef/749af/tagpage-after.webp 485w,\n/blog/static/073e4206e785a441e044c1cc63ede6ef/dbca2/tagpage-after.webp 970w,\n/blog/static/073e4206e785a441e044c1cc63ede6ef/bda17/tagpage-after.webp 1455w,\n/blog/static/073e4206e785a441e044c1cc63ede6ef/0dc73/tagpage-after.webp 1940w,\n/blog/static/073e4206e785a441e044c1cc63ede6ef/ad234/tagpage-after.webp 2310w\"\n              sizes=\"(max-width: 970px) 100vw, 970px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/blog/static/073e4206e785a441e044c1cc63ede6ef/3f316/tagpage-after.jpg 243w,\n/blog/static/073e4206e785a441e044c1cc63ede6ef/0d3a1/tagpage-after.jpg 485w,\n/blog/static/073e4206e785a441e044c1cc63ede6ef/ec7ce/tagpage-after.jpg 970w,\n/blog/static/073e4206e785a441e044c1cc63ede6ef/8010b/tagpage-after.jpg 1455w,\n/blog/static/073e4206e785a441e044c1cc63ede6ef/f32bc/tagpage-after.jpg 1940w,\n/blog/static/073e4206e785a441e044c1cc63ede6ef/06e68/tagpage-after.jpg 2310w\"\n            sizes=\"(max-width: 970px) 100vw, 970px\"\n            type=\"image/jpeg\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/blog/static/073e4206e785a441e044c1cc63ede6ef/ec7ce/tagpage-after.jpg\"\n            alt=\"Tags Page - After\"\n            title=\"Tags Page - After\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>","fields":{"slug":"/gatsby-reuse-react-component/"},"frontmatter":{"title":"Gatsby - How To Reuse React Component","date":"2021, Aug 31","tags":["tech","react","gatsby"],"memorydata":null,"practicedata":null,"img":{"childImageSharp":{"resize":{"src":"/static/b8b46b8dbe136282a1c2f422edd544b0/47498/reuse-component-title.jpg","height":522,"width":1200},"gatsbyImageData":{"layout":"fullWidth","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAJABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAQBBf/EABQBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAe/PQDQv/8QAGBAAAgMAAAAAAAAAAAAAAAAAAAIBEiD/2gAIAQEAAQUCElrY/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFxABAAMAAAAAAAAAAAAAAAAAAQARIP/aAAgBAQAGPwKNmf/EABkQAQACAwAAAAAAAAAAAAAAAAERIQAgMf/aAAgBAQABPyFoanHSUPNf/9oADAMBAAIAAwAAABB0D//EABYRAQEBAAAAAAAAAAAAAAAAAAEQIf/aAAgBAwEBPxBNn//EABYRAQEBAAAAAAAAAAAAAAAAAAEREP/aAAgBAgEBPxBK3P/EABoQAQACAwEAAAAAAAAAAAAAAAERQQAQIVH/2gAIAQEAAT8QaoSCQLwID0l0CPaZrd6//9k="},"images":{"fallback":{"src":"/blog/static/b8b46b8dbe136282a1c2f422edd544b0/0b2fc/reuse-component-title.jpg","srcSet":"/blog/static/b8b46b8dbe136282a1c2f422edd544b0/7a0ff/reuse-component-title.jpg 750w,\n/blog/static/b8b46b8dbe136282a1c2f422edd544b0/02fde/reuse-component-title.jpg 1080w,\n/blog/static/b8b46b8dbe136282a1c2f422edd544b0/2b622/reuse-component-title.jpg 1366w,\n/blog/static/b8b46b8dbe136282a1c2f422edd544b0/0b2fc/reuse-component-title.jpg 1920w","sizes":"100vw"},"sources":[{"srcSet":"/blog/static/b8b46b8dbe136282a1c2f422edd544b0/8372e/reuse-component-title.avif 750w,\n/blog/static/b8b46b8dbe136282a1c2f422edd544b0/8a941/reuse-component-title.avif 1080w,\n/blog/static/b8b46b8dbe136282a1c2f422edd544b0/23dcf/reuse-component-title.avif 1366w,\n/blog/static/b8b46b8dbe136282a1c2f422edd544b0/5120b/reuse-component-title.avif 1920w","type":"image/avif","sizes":"100vw"},{"srcSet":"/blog/static/b8b46b8dbe136282a1c2f422edd544b0/1cb46/reuse-component-title.webp 750w,\n/blog/static/b8b46b8dbe136282a1c2f422edd544b0/3edfd/reuse-component-title.webp 1080w,\n/blog/static/b8b46b8dbe136282a1c2f422edd544b0/f81a7/reuse-component-title.webp 1366w,\n/blog/static/b8b46b8dbe136282a1c2f422edd544b0/1bd06/reuse-component-title.webp 1920w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.43489583333333337}}}}}},"pageContext":{"slug":"/gatsby-reuse-react-component/","previous":{"fields":{"slug":"/keep-going/"},"frontmatter":{"title":"Keep Going","tags":["austin kleon","review","book","non-fiction","gift"],"img":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAJABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAECAwX/xAAVAQEBAAAAAAAAAAAAAAAAAAABA//aAAwDAQACEAMQAAABz4pELQCf/8QAGhAAAQUBAAAAAAAAAAAAAAAAAAECESExMv/aAAgBAQABBQImx+J0f//EABcRAQADAAAAAAAAAAAAAAAAAAEQESL/2gAIAQMBAT8BDNx//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFhAAAwAAAAAAAAAAAAAAAAAAARAg/9oACAEBAAY/AoK//8QAGhAAAQUBAAAAAAAAAAAAAAAAAQARICFBUf/aAAgBAQABPyElrK4bF3//2gAMAwEAAgADAAAAEKP/AP/EABYRAQEBAAAAAAAAAAAAAAAAAAEQEf/aAAgBAwEBPxA9Kf/EABURAQEAAAAAAAAAAAAAAAAAABBB/9oACAECAQE/EIf/xAAaEAEBAAIDAAAAAAAAAAAAAAABABEhobHR/9oACAEBAAE/ECCmAjQbGzF3XF8i/9k="},"images":{"fallback":{"src":"/blog/static/d04d882a984490d63fe921df783a64f0/86725/keep-going-header.jpg","srcSet":"/blog/static/d04d882a984490d63fe921df783a64f0/2e9d5/keep-going-header.jpg 750w,\n/blog/static/d04d882a984490d63fe921df783a64f0/37167/keep-going-header.jpg 1080w,\n/blog/static/d04d882a984490d63fe921df783a64f0/a1598/keep-going-header.jpg 1366w,\n/blog/static/d04d882a984490d63fe921df783a64f0/86725/keep-going-header.jpg 1920w","sizes":"100vw"},"sources":[{"srcSet":"/blog/static/d04d882a984490d63fe921df783a64f0/b6c78/keep-going-header.webp 750w,\n/blog/static/d04d882a984490d63fe921df783a64f0/a9803/keep-going-header.webp 1080w,\n/blog/static/d04d882a984490d63fe921df783a64f0/7a617/keep-going-header.webp 1366w,\n/blog/static/d04d882a984490d63fe921df783a64f0/b1ea9/keep-going-header.webp 1920w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.45468749999999997}}}}},"next":null}},"staticQueryHashes":["30279731","764694655"]}